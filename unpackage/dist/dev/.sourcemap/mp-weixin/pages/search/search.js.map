{"version":3,"sources":["uni-app:///main.js","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?4467","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?ee44","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?dbd4","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?cfc1","uni-app:///pages/search/search.vue","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?90e4","webpack:///F:/项目练习/uni-app/shoppingmall/pages/search/search.vue?be78"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC2K;AAC3K,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,2OAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA2oB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsC/pB;AACA,UADA;AAEA,gBAFA;;;AAKA,WALA;AAMA,MANA,kBAMA;AACA;AACA,kCADA;AAEA,iBAFA;AAGA,qBAHA;AAIA,wBAJA;AAKA,kBALA;AAMA,iBANA;AAOA,wBAPA;;AASA,GAhBA;AAiBA;AACA;AACA,YAFA,sBAEA;AACA;AACA,KAJA;AAKA;AACA,aANA,uBAMA;AACA;;;;;AAKA,oFALA;;AAOA,qBAPA;AAQA,gBARA;AASA;AACA;AACA;AACA;AACA,SAbA;AAcA,gCAdA;AAeA,wCAfA;;AAiBA,KAxBA;AAyBA;AACA,UA1BA,oBA0BA;AACA;AACA,6BADA;AAEA;AACA;AACA;;;;;AAKA,uEALA;;AAOA,4BAPA;AAQA;AACA,qCADA,EARA;;AAWA;AACA;AACA;AACA,sCADA;AAEA,gCAFA;;AAIA,eAjBA;;AAmBA;AACA,SAxBA;;AA0BA,KArDA;AAsDA;AACA,YAvDA,sBAuDA;AACA;AACA;;;;;AAKA,uFALA;;AAOA,qBAPA;AAQA,gBARA;AASA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA;AACA;AACA,2EADA;AAEA;AACA,wBADA;AAEA,2BAFA;;AAIA,aARA;AASA;AACA,SA5BA;;AA8BA;;;;;AAKA,6DALA;;AAOA,sBAPA;AAQA;AACA,+BADA;AAEA,6BAFA,EARA;;AAYA;AACA;AACA,SAdA;AAeA,gCAfA;AAgBA,wCAhBA;;AAkBA,KAzGA;AA0GA;AACA,UA3GA,kBA2GA,OA3GA,EA2GA;AACA;AACA;AACA,KA9GA;AA+GA;AACA,YAhHA,oBAgHA,EAhHA,EAgHA;AACA;AACA,kDADA;;AAGA,KApHA,EAjBA;;AAuIA,SAvIA,qBAuIA;;AAEA,GAzIA;AA0IA,QA1IA,oBA0IA;AACA;AACA,GA5IA;AA6IA,aA7IA;;;AAgJA,cAhJA;;;AAmJA,WAnJA;;;AAsJA,gBAtJA,E;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAwsC,CAAgB,klCAAG,EAAC,C;;;;;;;;;;;ACA5tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cedc0c6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"","var components = {\n  uSearch: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-search/u-search\" */ \"uview-ui/components/u-search/u-search.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"box\">\r\n    <view class=\"search\">\r\n      <u-search :placeholder=\"defaultKeyword\" v-model=\"keyword\" shape=\"round\" action-text=\"取消\" @custom='onCustom'\r\n        @search=\"onSearch\"></u-search>\r\n    </view>\r\n    <view v-if=\"keyword === ''\">\r\n      <view class=\"del\">\r\n        <view class=\"history\">搜索历史</view>\r\n        <image src=\"../../static/image/del.png\" class=\"del_img\" @click=\"delect\"></image>\r\n      </view>\r\n      <view class=\"\" v-if=\"historyData.length == 0\">暂无搜索历史</view>\r\n      <view class=\"historyElse\" v-else>\r\n        <view class=\"item_box\" v-for=\"(item,index) in historyData\" :key=\"index\" @click=\"hotkey(item.keyword)\">\r\n          {{item.keyword}}\r\n        </view>\r\n      </view>\r\n      <view class=\"hot\">热门搜索</view>\r\n      <view class=\"historyElse\">\r\n        <view class=\"item_box\" v-for=\"(item,index) in hotKeywordList\" :key=\"index\" :class=\"{'active':item.is_hot===1}\"\r\n          @click=\"hotkey(item.keyword)\">\r\n          {{item.keyword}}\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-else>\r\n      <view v-if=\"flag == true\">暂无数据，请重新搜索</view>\r\n      <view v-else>\r\n        <view class=\"searchItem\" v-for=\"item in keywords\" :key=\"item.id\" @click=\"goDetail(item.id)\">\r\n          <image :src=\"item.list_pic_url\" class=\"list_pic_url\"></image>\r\n          <view class=\"searchName\" v-html=\"item.searchName\"></view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"\",\r\n    components: {\r\n\r\n    },\r\n    props: {},\r\n    data() {\r\n      return {\r\n        openId: \"wx09adfeb7d1629322\",\r\n        keyword: '',\r\n        historyData: [],\r\n        hotKeywordList: [],\r\n        keywords: [],\r\n        flag: false,\r\n        defaultKeyword: ''\r\n      }\r\n    },\r\n    methods: {\r\n      // 取消\r\n      onCustom() {\r\n        this.keyword = ''\r\n      },\r\n      // 获取搜索历史，热搜\r\n      getSearch() {\r\n        uni.request({\r\n          // #ifdef  H5\r\n          url: `/api/search/indexaction?openId=${this.openId}`,\r\n          // #endif\r\n          // #ifndef  H5\r\n          url: `${this.$api}/search/indexaction?openId=${this.openId}`,\r\n          // #endif\r\n          method: 'GET',\r\n          data: {},\r\n          success: res => {\r\n            this.hotKeywordList = res.data.hotKeywordList\r\n            this.historyData = res.data.historyData\r\n            this.defaultKeyword = res.data.defaultKeyword.keyword\r\n          },\r\n          fail: () => {},\r\n          complete: () => {}\r\n        });\r\n      },\r\n      // 删除历史记录\r\n      delect() {\r\n        uni.showModal({\r\n          content: '确认删除历史记录吗？',\r\n          success: (res) => {\r\n            if (res.confirm) {\r\n              uni.request({\r\n                // #ifdef  H5\r\n                url: `/api/search/clearhistoryAction`,\r\n                // #endif\r\n                // #ifndef  H5\r\n                url: `${this.$api}/search/clearhistoryAction`,\r\n                // #endif\r\n                method: 'POST',\r\n                data: {\r\n                  openId: this.openId\r\n                },\r\n                success: res => {\r\n                  this.getSearch()\r\n                  uni.showToast({\r\n                    title: res.data.data,\r\n                    duration: 2000\r\n                  })\r\n                },\r\n              });\r\n            }\r\n          }\r\n        })\r\n      },\r\n      // 搜索\r\n      onSearch() {\r\n        console.log(this.unm);\r\n        uni.request({\r\n          // #ifdef  H5\r\n          url: `/api/search/helperaction?keyword=${this.keyword}`,\r\n          // #endif\r\n          // #ifndef  H5\r\n          url: `${this.$api}/search/helperaction?keyword=${this.keyword}`,\r\n          // #endif\r\n          method: 'GET',\r\n          data: {},\r\n          success: res => {\r\n            if (res.data.keywords.length === 0) {\r\n              this.flag = true\r\n            } else {\r\n              this.flag = false\r\n              res.data.keywords.map(item => {\r\n                this.$set(item, \"searchName\", item.name);\r\n              });\r\n              this.keywords = res.data.keywords\r\n              this.keywords.map(item => {\r\n                let replaceReg = new RegExp(this.keyword, \"g\");\r\n                let replaceString =\r\n                  '<text class=\"highlights-text\">' + this.keyword + \"</text>\";\r\n                item.searchName = item.searchName.replace(\r\n                  replaceReg,\r\n                  replaceString\r\n                );\r\n              });\r\n            }\r\n          },\r\n        });\r\n        uni.request({\r\n          // #ifdef  H5\r\n          url: `/api/search/addhistoryaction`,\r\n          // #endif\r\n          // #ifndef  H5\r\n          url: `${this.$api}/search/addhistoryaction`,\r\n          // #endif\r\n          method: 'POST',\r\n          data: {\r\n            keyword: this.keyword,\r\n            openId: this.openId\r\n          },\r\n          success: res => {\r\n            this.getSearch()\r\n          },\r\n          fail: () => {},\r\n          complete: () => {}\r\n        });\r\n      },\r\n      // 热搜\r\n      hotkey(keyword) {\r\n        this.keyword = keyword\r\n        this.onSearch()\r\n      },\r\n      // 详情\r\n      goDetail(id) {\r\n        uni.navigateTo({\r\n          url: `/pages/detail/detail?id=${id}`\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      \r\n    },\r\n    onLoad() {\r\n      this.getSearch()\r\n    },\r\n    filters: {\r\n\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    watch: {\r\n\r\n    },\r\n    directives: {\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .search {\r\n    padding: 20rpx 0;\r\n  }\r\n\r\n  .box {\r\n    padding: 0 20rpx;\r\n  }\r\n\r\n  .del {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10rpx;\r\n  }\r\n\r\n  .history {\r\n    font-size: 34rpx;\r\n    font-weight: 600;\r\n    margin: 20rpx 0;\r\n  }\r\n\r\n  .del_img {\r\n    width: 30rpx;\r\n    height: 30rpx;\r\n  }\r\n\r\n  .historyElse {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .item_box {\r\n    font-size: 28rpx;\r\n    border: 1rpx solid #999;\r\n    padding: 6rpx 10rpx;\r\n    margin: 10rpx;\r\n  }\r\n\r\n  .active {\r\n    color: #d81e06;\r\n    border: 1rpx solid #d81e06;\r\n  }\r\n\r\n  .hot {\r\n    margin: 30rpx 0;\r\n    font-size: 34rpx;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .searchItem {\r\n    margin-top: 20rpx;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .list_pic_url {\r\n    width: 100rpx;\r\n    height: 100rpx;\r\n    margin-right: 20rpx;\r\n    border: 1rpx solid #EEEEEE;\r\n  }\r\n\r\n  .searchName {\r\n    width: 588rpx;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n</style>\n","import mod from \"-!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1597627665624\n      var cssReload = require(\"F:/迅雷下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}